apiVersion: v1
kind: ReplicationController
metadata:
  labels:
    name: postgre
    sonar-version: v5
  name: postgre-controller
spec:
  replicas: 1
  template:
    metadata:
      labels:
        name: postgre
    spec:
      containers:
      - image: orchardup/postgresql:latest
        name: postgre
        env:
          - name: POSTGRESQL_USER
            value: sonar
          - name: POSTGRESQL_PASS
            value: xaexohquaetiesoo
          - name: POSTGRESQL_DB
            value: sonar
        ports:
        - name: postgre
          containerPort: 5432
          hostPort: 5432
        volumeMounts:
            - name: postgre-sonar5-storage
              mountPath: /var/lib/postgresql
      volumes:
        - name: postgre-sonar5-storage
          hostPath:
            path: /var/data/docker/postgre-sonar-5
